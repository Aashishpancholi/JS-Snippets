<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRUD in JS</title>
  <link rel="stylesheet" href="crudInJS.css">
</head>

<body>
  <div id="wrapper">
    <h1>CRUD in JS</h1>
    <form action="">
      <input autofocus type="text" id="name" placeholder="Enter your name"><span class="err"></span><br>

      <input type="text" id="age" placeholder="Enter your age"><span class="err"></span><br>

      <input type="text" id="phone" placeholder="Enter your phone"><span class="err"></span><br>

      <input type="text" id="email" placeholder="Enter your email"><span class="err"></span><br>

      <input class="gender" type="radio" name="gender" value="male">Male
      <input class="gender" type="radio" name="gender" value="female">Female
      <input class="gender" type="radio" name="gender" value="other">Other
      <span class="err"></span><br>

      <select name="" id="hometown">
        <option value="" selected disabled>Select Hometown</option>
        <option value="Jaipur">Jaipur</option>
        <option value="Jodhpur">Jodhpur</option>
        <option value="Ajmer">Ajmer</option>
        <option value="Kota">Kota</option>
        <option value="Pilani">Pilani</option>
        <option value="Nagaur">Nagaur</option>
      </select>
      <span class="err"></span><br>

      <button type="submit">Submit</button>
    </form>



    <table>
      <tr>
        <th>S.No</th>
        <th>Name</th>
        <th>Age</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Gender</th>
        <th>Hometown</th>
        <th>Actions</th>
      </tr>
    </table>
  </div>

  <script>
    const frm = document.querySelector("form")
    frm.onsubmit = (e) => {
      e.preventDefault();
      
      //gender has to be processed separately
      let gender = Array.from(document.querySelectorAll(".gender")).filter((g) => {return g.checked})
      console.log(gender[0].value)


      //creating an object
      const formData = {}

      //adding properties to object
      formData.sno = ''
      formData.name = document.querySelector("#name")
      formData.age = document.querySelector("#age")
      formData.phone = document.querySelector("#phone")
      formData.email = document.querySelector("#email")
      formData.gender = gender[0]
      formData.hometown = document.querySelector("#hometown")

      //getting the table from HTML
      const table = document.querySelector("table");
      
      //getting the count of existing rows in the table
      const trCount = table.children[0].children.length;

      //creating new tr
      let tableRow = document.createElement("tr");

      //creating and populating td
      //and adding them to tr
      for (let x in formData) {
        if (x === 'sno') {
          let td = document.createElement("td")
          td.innerHTML = trCount
          tableRow.appendChild(td)
        }
        else {
          let td = document.createElement("td")
          td.innerHTML = formData[x].value
          tableRow.appendChild(td)
        }
      }

      //creating anchor tags
      //and adding them to tr
      const td = document.createElement("td")

      const edit = document.createElement("a")
      edit.innerHTML = "Edit"
      edit.setAttribute("href", "")
      td.appendChild(edit)
      
      const del = document.createElement("a")
      del.innerHTML = "Delete"
      del.setAttribute("href", "")
      td.appendChild(del)
      tableRow.appendChild(td)
      

      //adding the tr to the table
      table.children[0].appendChild(tableRow)


      //clearing the form
      document.querySelector("form").reset()
    }
  </script>
</body>

</html>